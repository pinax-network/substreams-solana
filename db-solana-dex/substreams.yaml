specVersion: v0.1.0
package:
  name: solana_dex
  version: v0.3.1
  url: https://github.com/pinax-network/substreams-solana
  description: DEXs for Solana.
  image: ../image.png

imports:
  # SQL Sink Substreams
  database_changes: ../spkg/substreams-sink-database-changes-v4.0.0.spkg
  sql: ../spkg/substreams-sink-sql-protodefs-v1.0.7.spkg

  # DEXs
  pumpfun: https://github.com/pinax-network/substreams-solana/releases/download/solana-dex-v0.3.0/pumpfun-bonding-curve-v0.2.2.spkg
  pumpfun_amm: https://github.com/pinax-network/substreams-solana/releases/download/solana-dex-v0.2.0/pumpfun-amm-v0.2.0.spkg
  raydium_amm_v4: https://github.com/pinax-network/substreams-solana/releases/download/solana-dex-v0.2.0/raydium-amm-v4-v0.2.0.spkg
  raydium_cpmm: https://github.com/pinax-network/substreams-solana/releases/download/solana-dex-v0.3.0/raydium-cpmm-v0.1.0.spkg
  raydium_clmm: https://github.com/pinax-network/substreams-solana/releases/download/solana-dex-v0.3.0/raydium-clmm-v0.1.0.spkg
  raydium_launchpad: https://github.com/pinax-network/substreams-solana/releases/download/solana-dex-v0.3.0/raydium-launchpad-v0.1.0.spkg
  meteora_dllm: https://github.com/pinax-network/substreams-solana/releases/download/solana-dex-v0.3.0/meteora-dllm-v0.1.0.spkg
  meteora_daam: https://github.com/pinax-network/substreams-solana/releases/download/solana-dex-v0.3.0/meteora-daam-v0.1.0.spkg
  meteora_amm: https://github.com/pinax-network/substreams-solana/releases/download/solana-dex-v0.3.0/meteora-amm-v0.1.0.spkg
  jupiter_v4: https://github.com/pinax-network/substreams-solana/releases/download/solana-dex-v0.2.0/jupiter-v4-v0.2.0.spkg
  jupiter_v6: https://github.com/pinax-network/substreams-solana/releases/download/solana-dex-v0.2.0/jupiter-v6-v0.2.0.spkg

  # New DEXs (local paths until first release)
  orca: ../orca/whirlpool/substreams.yaml
  phoenix: ../phoenix/substreams.yaml
  openbook: ../openbook/substreams.yaml
  pumpswap: ../pumpswap/substreams.yaml
  darklake: ../darklake/substreams.yaml
  lifinity: ../lifinity/substreams.yaml
  moonshot: ../moonshot/substreams.yaml
  pancakeswap: ../pancakeswap/substreams.yaml
  stabble: ../stabble/substreams.yaml

binaries:
  default:
    type: wasm/rust-v1
    file: ../target/wasm32-unknown-unknown/release/db_solana_dex.wasm

modules:
  - name: db_out
    kind: map
    inputs:
      - source: sf.substreams.v1.Clock

      # DEXs
      - map: pumpfun:map_events
      - map: pumpfun_amm:map_events
      - map: raydium_amm_v4:map_events
      - map: raydium_cpmm:map_events
      - map: raydium_clmm:map_events
      - map: raydium_launchpad:map_events
      - map: meteora_dllm:map_events
      - map: meteora_daam:map_events
      - map: meteora_amm:map_events
      - map: jupiter_v4:map_events
      - map: jupiter_v6:map_events

      # New DEXs
      - map: orca:map_events
      - map: phoenix:map_events
      - map: openbook:map_events
      - map: pumpswap:map_events
      - map: darklake:map_events
      - map: lifinity:map_events
      - map: moonshot:map_events
      - map: pancakeswap:map_events
      - map: stabble:map_events

    output:
      type: proto:sf.substreams.sink.database.v1.DatabaseChanges

network: solana
